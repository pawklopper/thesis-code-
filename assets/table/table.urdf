<?xml version="1.0"?>
<robot name="table">

  <!-- ================= MATERIALS ================= -->
  <material name="wood_brown"><color rgba="0.6 0.3 0.1 1"/></material>
  <material name="metal_grey"><color rgba="0.5 0.5 0.5 1"/></material>
  <material name="marker_red"><color rgba="1 0 0 1"/></material>
  <material name="marker_blue"><color rgba="0 0 1 1"/></material>

  <!-- ================= BASE LINK ================= -->
  <link name="base_link">
    <inertial>
      <origin xyz="0 0 0"/>
      <mass value="1.0"/>
      <inertia ixx="0.1" iyy="0.1" izz="0.1" ixy="0" ixz="0" iyz="0"/>
    </inertial>
  </link>

  <!-- Put the tabletop frame 0.51 m above ground so 0.08 m wheels touch ground -->
  <joint name="table_base_joint" type="fixed">
    <parent link="base_link"/>
    <child link="table_top"/>
    <origin xyz="0 0 0.51"/>
  </joint>

  <!-- ================= TABLE TOP ================= -->
  <link name="table_top">
    <inertial>
      <origin xyz="0 0 0.025"/>
      <mass value="15.0"/>
      <inertia ixx="0.3156" iyy="1.2531" izz="1.5625" ixy="0" ixz="0" iyz="0"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0.025"/>
      <geometry><box size="1.0 0.5 0.05"/></geometry>
      <material name="wood_brown"/>
    </visual>
    <collision>
      <origin xyz="0 0 0.025"/>
      <geometry><box size="1.0 0.5 0.05"/></geometry>
    </collision>
  </link>

  <!-- ================= MARKERS ================= -->
  <link name="table_robot_end">
    <inertial><origin xyz="0 0 0"/><mass value="0.01"/><inertia ixx="1e-5" iyy="1e-5" izz="1e-5"/></inertial>
    <visual><origin xyz="0 0 0"/><geometry><sphere radius="0.05"/></geometry><material name="marker_red"/></visual>
    <collision><origin xyz="0 0 0"/><geometry><sphere radius="0.05"/></geometry></collision>
  </link>
  <joint name="robot_end_joint" type="fixed">
    <parent link="table_top"/><child link="table_robot_end"/><origin xyz="-0.5 0 -0.05"/>
  </joint>

  <link name="table_human_end">
    <inertial><origin xyz="0 0 0"/><mass value="0.01"/><inertia ixx="1e-5" iyy="1e-5" izz="1e-5"/></inertial>
    <visual><origin xyz="0 0 0"/><geometry><sphere radius="0.05"/></geometry><material name="marker_blue"/></visual>
    <collision><origin xyz="0 0 0"/><geometry><sphere radius="0.05"/></geometry></collision>
  </link>
  <joint name="human_end_joint" type="fixed">
    <parent link="table_top"/><child link="table_human_end"/><origin xyz="0.5 0 0"/>
  </joint>

  <!-- ================= TABLE LEGS ================= -->
  <!-- Robot side legs -->
  <link name="leg_fl">
    <inertial><origin xyz="0 0 -0.215"/><mass value="0.2"/><inertia ixx="0.00313" iyy="0.00313" izz="0.00009"/></inertial>
    <visual><origin xyz="0 0 -0.215"/><geometry><cylinder radius="0.03" length="0.43"/></geometry><material name="metal_grey"/></visual>
    <collision><origin xyz="0 0 -0.215"/><geometry><cylinder radius="0.03" length="0.43"/></geometry></collision>
  </link>
  <joint name="leg_fl_joint" type="fixed">
    <parent link="table_top"/><child link="leg_fl"/><origin xyz="-0.45 0.20 0"/>
  </joint>

  <link name="leg_fr">
    <inertial><origin xyz="0 0 -0.215"/><mass value="0.2"/><inertia ixx="0.00313" iyy="0.00313" izz="0.00009"/></inertial>
    <visual><origin xyz="0 0 -0.215"/><geometry><cylinder radius="0.03" length="0.43"/></geometry><material name="metal_grey"/></visual>
    <collision><origin xyz="0 0 -0.215"/><geometry><cylinder radius="0.03" length="0.43"/></geometry></collision>
  </link>
  <joint name="leg_fr_joint" type="fixed">
    <parent link="table_top"/><child link="leg_fr"/><origin xyz="-0.45 -0.20 0"/>
  </joint>

  <!-- Human side legs -->
  <link name="leg_rl">
    <inertial><origin xyz="0 0 -0.215"/><mass value="0.2"/><inertia ixx="0.00313" iyy="0.00313" izz="0.00009"/></inertial>
    <visual><origin xyz="0 0 -0.215"/><geometry><cylinder radius="0.03" length="0.43"/></geometry><material name="metal_grey"/></visual>
    <collision><origin xyz="0 0 -0.215"/><geometry><cylinder radius="0.03" length="0.43"/></geometry></collision>
  </link>
  <joint name="leg_rl_joint" type="fixed">
    <parent link="table_top"/><child link="leg_rl"/><origin xyz="0.45 0.20 0"/>
  </joint>

  <link name="leg_rr">
    <inertial><origin xyz="0 0 -0.215"/><mass value="0.2"/><inertia ixx="0.00313" iyy="0.00313" izz="0.00009"/></inertial>
    <visual><origin xyz="0 0 -0.215"/><geometry><cylinder radius="0.03" length="0.43"/></geometry><material name="metal_grey"/></visual>
    <collision><origin xyz="0 0 -0.215"/><geometry><cylinder radius="0.03" length="0.43"/></geometry></collision>
  </link>
  <joint name="leg_rr_joint" type="fixed">
    <parent link="table_top"/><child link="leg_rr"/><origin xyz="0.45 -0.20 0"/>
  </joint>
<!-- ================= ALL 4 CASTERS (radius 0.0625 m) ================= -->

<!-- Common caster parameters -->
<!-- Each caster consists of:
     1. A swivel joint (vertical, Z-axis)
     2. A wheel joint (Y-axis, with trail offset) -->

<!-- FRONT LEFT -->
<link name="caster_fl_swivel_link">
  <inertial><origin xyz="0 0 0"/><mass value="0.05"/><inertia ixx="1e-4" iyy="1e-4" izz="1e-4"/></inertial>
</link>

<joint name="caster_fl_swivel_joint" type="continuous">
  <parent link="leg_fl"/>
  <child link="caster_fl_swivel_link"/>
  <origin xyz="0 0 -0.43" rpy="0 0 0"/>
  <axis xyz="0 0 1"/>
  <dynamics damping="0.1"/>
</joint>

<link name="caster_fl_link">
  <inertial><origin xyz="0 0 0"/><mass value="1.0"/><inertia ixx="0.001" iyy="0.001" izz="0.001"/></inertial>
  <visual>
    <origin rpy="0 1.5708 1.5708" xyz="0 0 0"/>
    <geometry><cylinder length="0.06" radius="0.0625"/></geometry>
    <material name="marker_blue"/>
  </visual>
  <collision>
    <origin rpy="0 1.5708 1.5708" xyz="0 0 0"/>
    <geometry><cylinder length="0.06" radius="0.0625"/></geometry>
  </collision>
</link>

<joint name="caster_fl_joint" type="continuous">
  <parent link="caster_fl_swivel_link"/>
  <child link="caster_fl_link"/>
  <origin xyz="-0.05 0 -0.06" rpy="0 0 0"/>
  <axis xyz="0 1 0"/>
  <dynamics damping="0.01"/>
</joint>


<!-- FRONT RIGHT -->
<link name="caster_fr_swivel_link">
  <inertial><origin xyz="0 0 0"/><mass value="0.05"/><inertia ixx="1e-4" iyy="1e-4" izz="1e-4"/></inertial>
</link>

<joint name="caster_fr_swivel_joint" type="continuous">
  <parent link="leg_fr"/>
  <child link="caster_fr_swivel_link"/>
  <origin xyz="0 0 -0.43" rpy="0 0 0"/>
  <axis xyz="0 0 1"/>
  <dynamics damping="0.1"/>
</joint>

<link name="caster_fr_link">
  <inertial><origin xyz="0 0 0"/><mass value="1.0"/><inertia ixx="0.001" iyy="0.001" izz="0.001"/></inertial>
  <visual>
    <origin rpy="0 1.5708 1.5708" xyz="0 0 0"/>
    <geometry><cylinder length="0.06" radius="0.0625"/></geometry>
    <material name="marker_blue"/>
  </visual>
  <collision>
    <origin rpy="0 1.5708 1.5708" xyz="0 0 0"/>
    <geometry><cylinder length="0.06" radius="0.0625"/></geometry>
  </collision>
</link>

<joint name="caster_fr_joint" type="continuous">
  <parent link="caster_fr_swivel_link"/>
  <child link="caster_fr_link"/>
  <origin xyz="-0.05 0 -0.06" rpy="0 0 0"/>
  <axis xyz="0 1 0"/>
  <dynamics damping="0.01"/>
</joint>


<!-- REAR LEFT -->
<link name="caster_rl_swivel_link">
  <inertial><origin xyz="0 0 0"/><mass value="0.05"/><inertia ixx="1e-4" iyy="1e-4" izz="1e-4"/></inertial>
</link>

<joint name="caster_rl_swivel_joint" type="continuous">
  <parent link="leg_rl"/>
  <child link="caster_rl_swivel_link"/>
  <origin xyz="0 0 -0.43" rpy="0 0 0"/>
  <axis xyz="0 0 1"/>
  <dynamics damping="0.1"/>
</joint>

<link name="caster_rl_link">
  <inertial><origin xyz="0 0 0"/><mass value="1.0"/><inertia ixx="0.001" iyy="0.001" izz="0.001"/></inertial>
  <visual>
    <origin rpy="0 1.5708 1.5708" xyz="0 0 0"/>
    <geometry><cylinder length="0.06" radius="0.0625"/></geometry>
    <material name="marker_blue"/>
  </visual>
  <collision>
    <origin rpy="0 1.5708 1.5708" xyz="0 0 0"/>
    <geometry><cylinder length="0.06" radius="0.0625"/></geometry>
  </collision>
</link>

<joint name="caster_rl_joint" type="continuous">
  <parent link="caster_rl_swivel_link"/>
  <child link="caster_rl_link"/>
  <origin xyz="-0.05 0 -0.06" rpy="0 0 0"/>
  <axis xyz="0 1 0"/>
  <dynamics damping="0.01"/>
</joint>


<!-- REAR RIGHT -->
<link name="caster_rr_swivel_link">
  <inertial><origin xyz="0 0 0"/><mass value="0.05"/><inertia ixx="1e-4" iyy="1e-4" izz="1e-4"/></inertial>
</link>

<joint name="caster_rr_swivel_joint" type="continuous">
  <parent link="leg_rr"/>
  <child link="caster_rr_swivel_link"/>
  <origin xyz="0 0 -0.43" rpy="0 0 0"/>
  <axis xyz="0 0 1"/>
  <dynamics damping="0.1"/>
</joint>

<link name="caster_rr_link">
  <inertial><origin xyz="0 0 0"/><mass value="1.0"/><inertia ixx="0.001" iyy="0.001" izz="0.001"/></inertial>
  <visual>
    <origin rpy="0 1.5708 1.5708" xyz="0 0 0"/>
    <geometry><cylinder length="0.06" radius="0.0625"/></geometry>
    <material name="marker_blue"/>
  </visual>
  <collision>
    <origin rpy="0 1.5708 1.5708" xyz="0 0 0"/>
    <geometry><cylinder length="0.06" radius="0.0625"/></geometry>
  </collision>
</link>

<joint name="caster_rr_joint" type="continuous">
  <parent link="caster_rr_swivel_link"/>
  <child link="caster_rr_link"/>
  <origin xyz="-0.05 0 -0.06" rpy="0 0 0"/>
  <axis xyz="0 1 0"/>
  <dynamics damping="0.01"/>
</joint>




</robot>
